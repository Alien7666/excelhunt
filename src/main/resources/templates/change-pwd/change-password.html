<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>ğŸ”‘æ›´æ”¹å¯†ç¢¼</title>
    <link rel="stylesheet" th:href="@{/change-pwd/style.css}">
    <link rel="icon" th:href="@{/main/icon.ico}" type="image/x-icon"/>
    <link rel="shortcut icon" th:href="@{/main/icon.ico}" type="image/x-icon"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<a class="no-underline" href="/">
    <h1>
        æ›´æ”¹å¯†ç¢¼
    </h1>
</a>
<form th:action="@{/change-password}" method="post">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
    <div class="form-group">
        <div class="label-input-container">
            <label for="currentPassword">ç¾åœ¨çš„å¯†ç¢¼:</label>
        </div>
        <div class="input-emoji-container">
            <input type="password" class="form-control" id="currentPassword" name="currentPassword" placeholder="è«‹è¼¸å…¥ç¾åœ¨çš„å¯†ç¢¼" required>
            <button class="toggle-password input-emoji"  onclick="togglePasswordVisibility1()" type="button">ğŸ™ˆ</button>
        </div>
    </div>
    <div class="form-group">
        <div class="label-input-container">
            <label for="currentPassword">æ–°å¯†ç¢¼:</label>
        </div>
        <div class="input-emoji-container">
            <input type="password" class="form-control" id="newPassword" name="newPassword" placeholder="è«‹è¼¸å…¥æ–°çš„å¯†ç¢¼" required>
            <button class="toggle-password input-emoji" onclick="togglePasswordVisibility2()" type="button">ğŸ™ˆ</button>
        </div>
    </div>
    <div class="form-group">
        <div class="label-input-container">
            <label for="currentPassword">ç¢ºèªæ–°å¯†ç¢¼:</label>
        </div>
        <div class="input-emoji-container">
            <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" placeholder="è«‹è¼¸å…¥æ–°çš„å¯†ç¢¼" required>
            <button class="toggle-password input-emoji" onclick="togglePasswordVisibility3()" type="button">ğŸ™ˆ</button>
        </div>
    </div>
    <button type="submit" class="btn btn-primary">é€å‡º</button>
    <div class="errormessage">
        <div th:if="${message}">
            <p th:text="${message}"></p>
        </div>
    </div>
</form>
<script>
    function togglePasswordVisibility1() {
        var passwordInput = document.getElementById('currentPassword');
        var toggleButton = document.querySelector('.toggle-password');
        if (passwordInput.type === "password") {
            passwordInput.type = "text";
            toggleButton.textContent = 'ğŸ™Š';
        } else {
            passwordInput.type = "password";
            toggleButton.textContent='ğŸ™ˆ';
        }
    }
    function togglePasswordVisibility2() {
        var passwordInput = document.getElementById('newPassword');
        var toggleButton = document.querySelector('.toggle-password');
        if (passwordInput.type === "password") {
            passwordInput.type = "text";
            toggleButton.textContent = 'ğŸ™Š';
        } else {
            passwordInput.type = "password";
            toggleButton.textContent='ğŸ™ˆ';
        }
    }
    function togglePasswordVisibility3() {
        var passwordInput = document.getElementById('confirmPassword');
        var toggleButton = document.querySelector('.toggle-password');
        if (passwordInput.type === "password") {
            passwordInput.type = "text";
            toggleButton.textContent = 'ğŸ™Š';
        } else {
            passwordInput.type = "password";
            toggleButton.textContent='ğŸ™ˆ';
        }
    }
</script>
<script th:inline="javascript">
    /*<![CDATA[*/
    var alertMessage = /*[[${alertMessage}]]*/ null;
    var redirectUrl = "/login";  // ä¿®æ”¹ä¸ºæ‚¨å¸Œæœ›é‡å®šå‘åˆ°çš„URL
    console.log(alertMessage);

    if (alertMessage) {
        var userConfirmed = window.confirm(alertMessage);
        if (userConfirmed) {
            window.location.href = redirectUrl;
        }
    }
    /*]]>*/
</script>
</body>
</html>
