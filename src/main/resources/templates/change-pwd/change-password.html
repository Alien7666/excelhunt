<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>🔑更改密碼</title>
    <link rel="stylesheet" th:href="@{/change-pwd/style.css}">
    <link rel="icon" th:href="@{/main/icon.ico}" type="image/x-icon"/>
    <link rel="shortcut icon" th:href="@{/main/icon.ico}" type="image/x-icon"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<a class="no-underline" href="/">
    <h1>
        更改密碼
    </h1>
</a>
<form th:action="@{/change-password}" method="post">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
    <div class="form-group">
        <div class="label-input-container">
            <label for="currentPassword">現在的密碼:</label>
        </div>
        <div class="input-emoji-container">
            <input type="password" class="form-control" id="currentPassword" name="currentPassword" placeholder="請輸入現在的密碼" required>
            <button class="toggle-password input-emoji"  onclick="togglePasswordVisibility1()" type="button">🙈</button>
        </div>
    </div>
    <div class="form-group">
        <div class="label-input-container">
            <label for="currentPassword">新密碼:</label>
        </div>
        <div class="input-emoji-container">
            <input type="password" class="form-control" id="newPassword" name="newPassword" placeholder="請輸入新的密碼" required>
            <button class="toggle-password input-emoji" onclick="togglePasswordVisibility2()" type="button">🙈</button>
        </div>
    </div>
    <div class="form-group">
        <div class="label-input-container">
            <label for="currentPassword">確認新密碼:</label>
        </div>
        <div class="input-emoji-container">
            <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" placeholder="請輸入新的密碼" required>
            <button class="toggle-password input-emoji" onclick="togglePasswordVisibility3()" type="button">🙈</button>
        </div>
    </div>
    <button type="submit" class="btn btn-primary">送出</button>
    <div class="errormessage">
        <div th:if="${message}">
            <p th:text="${message}"></p>
        </div>
    </div>
</form>
<script>
    function togglePasswordVisibility1() {
        var passwordInput = document.getElementById('currentPassword');
        var toggleButton = document.querySelector('.toggle-password');
        if (passwordInput.type === "password") {
            passwordInput.type = "text";
            toggleButton.textContent = '🙊';
        } else {
            passwordInput.type = "password";
            toggleButton.textContent='🙈';
        }
    }
    function togglePasswordVisibility2() {
        var passwordInput = document.getElementById('newPassword');
        var toggleButton = document.querySelector('.toggle-password');
        if (passwordInput.type === "password") {
            passwordInput.type = "text";
            toggleButton.textContent = '🙊';
        } else {
            passwordInput.type = "password";
            toggleButton.textContent='🙈';
        }
    }
    function togglePasswordVisibility3() {
        var passwordInput = document.getElementById('confirmPassword');
        var toggleButton = document.querySelector('.toggle-password');
        if (passwordInput.type === "password") {
            passwordInput.type = "text";
            toggleButton.textContent = '🙊';
        } else {
            passwordInput.type = "password";
            toggleButton.textContent='🙈';
        }
    }
</script>
<script th:inline="javascript">
    /*<![CDATA[*/
    var alertMessage = /*[[${alertMessage}]]*/ null;
    var redirectUrl = "/login";  // 修改为您希望重定向到的URL
    console.log(alertMessage);

    if (alertMessage) {
        var userConfirmed = window.confirm(alertMessage);
        if (userConfirmed) {
            window.location.href = redirectUrl;
        }
    }
    /*]]>*/
</script>
</body>
</html>
